"use strict";var TestimonialsController_1,__decorate=this&&this.__decorate||function(e,t,o,i){var r,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(a=(s<3?r(a):s>3?r(t,o,a):r(t,o))||a);return s>3&&a&&Object.defineProperty(t,o,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(e,t){return function(o,i){t(o,i,e)}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsController=void 0;const common_1=require("@nestjs/common"),swagger_1=require("@nestjs/swagger"),auth_guard_1=require("../auth/auth.guard"),auth_service_1=require("../auth/auth.service"),jwt_type_decorator_1=require("../auth/jwt/jwt.type.decorator"),CreateTestimonialRequest_1=require("./api/CreateTestimonialRequest"),TestimonialDto_1=require("./api/TestimonialDto"),testimonials_controller_swagger_desc_1=require("./testimonials.controller.swagger.desc"),testimonials_service_1=require("./testimonials.service");let TestimonialsController=TestimonialsController_1=class{constructor(e){this.testimonialsService=e,this.logger=new common_1.Logger(TestimonialsController_1.name)}async createTestimonial(e){return this.logger.debug("Create testimonial."),TestimonialDto_1.TestimonialDto.covertToApi(await this.testimonialsService.createTestimonial(e.message,e.name,e.title))}async getTestimonials(){return this.logger.debug("Get all testimonials."),(await this.testimonialsService.findAll()).map(TestimonialDto_1.TestimonialDto.covertToApi)}async getCount(e){return this.logger.debug("Get count of testimonials."),await this.testimonialsService.count(e)}};__decorate([common_1.Post(),common_1.UseGuards(auth_guard_1.AuthGuard),jwt_type_decorator_1.JwtType(auth_service_1.JwtProcessorType.RSA),swagger_1.ApiOperation({description:testimonials_controller_swagger_desc_1.SWAGGER_DESC_CREATE_TESTIMONIAL}),swagger_1.ApiOkResponse({type:TestimonialDto_1.TestimonialDto}),swagger_1.ApiForbiddenResponse({schema:{type:"object",properties:{statusCode:{type:"number"},message:{type:"string"},error:{type:"string"}}}}),__param(0,common_1.Body()),__metadata("design:type",Function),__metadata("design:paramtypes",[CreateTestimonialRequest_1.CreateTestimonialRequest]),__metadata("design:returntype",Promise)],TestimonialsController.prototype,"createTestimonial",null),__decorate([common_1.Get(),swagger_1.ApiOperation({description:testimonials_controller_swagger_desc_1.SWAGGER_DESC_GET_TESTIMONIALS}),swagger_1.ApiOkResponse({type:TestimonialDto_1.TestimonialDto,isArray:!0}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],TestimonialsController.prototype,"getTestimonials",null),__decorate([common_1.Get("count"),common_1.Header("content-type","text/html"),swagger_1.ApiOperation({description:testimonials_controller_swagger_desc_1.SWAGGER_DESC_GET_TESTIMONIALS_ON_SQL_QUERY}),swagger_1.ApiOkResponse({type:String}),__param(0,common_1.Query("query")),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],TestimonialsController.prototype,"getCount",null),TestimonialsController=TestimonialsController_1=__decorate([common_1.Controller("/api/testimonials"),swagger_1.ApiTags("Testimonials controller"),__metadata("design:paramtypes",[testimonials_service_1.TestimonialsService])],TestimonialsController),exports.TestimonialsController=TestimonialsController;