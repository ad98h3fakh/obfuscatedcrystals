"use strict";var HttpClientService_1,__decorate=this&&this.__decorate||function(t,e,a,r){var o,s=arguments.length,n=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(n=(s<3?o(n):s>3?o(e,a,n):o(e,a))||n);return s>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpClientService=void 0;const common_1=require("@nestjs/common"),axios_1=require("axios");let HttpClientService=HttpClientService_1=class{constructor(){this.log=new common_1.Logger(HttpClientService_1.name)}async loadJSON(t){const e=await axios_1.default.get(t,{responseType:"json"});if(200!=e.status)throw new Error(`Failed to load url: ${t}. Status ${e.status}`);return this.log.debug(`Loaded: ${e.data}`),e.data}async post(t,e,a){const r=await axios_1.default.post(t,e,a);if(![200,201].includes(+r.status))throw new Error(`Failed to load url: ${t}. Status ${r.status}`);return this.log.debug(`Loaded: ${r.data}`),r.data}async get(t,e){const a=await axios_1.default.get(t,e);if(![200,201].includes(+a.status))throw new Error(`Failed to load url: ${t}. Status ${a.status}`);return this.log.debug(`Loaded: ${a.data}`),a.data}async loadPlain(t){const e=await axios_1.default.get(t,{responseType:"arraybuffer"});if(200!=e.status)throw new Error(`Failed to load url: ${t}. Status ${e.status}`);const a=Buffer.from(e.data).toString();return this.log.debug(`Loaded: ${a}`),a}async loadAny(t){const e=await axios_1.default.get(t,{responseType:"arraybuffer"});if(200!=e.status)throw new Error(`Failed to load url: ${t}. Status ${e.status}`);return{content:Buffer.from(e.data),contentType:e.headers["content-type"]}}};HttpClientService=HttpClientService_1=__decorate([common_1.Injectable()],HttpClientService),exports.HttpClientService=HttpClientService;