"use strict";var __decorate=this&&this.__decorate||function(e,t,r,s){var a,c=arguments.length,i=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(c<3?a(i):c>3?a(t,r,i):a(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdminGuard=void 0;const common_1=require("@nestjs/common"),users_service_1=require("./users.service");let AdminGuard=class{constructor(e){this.users=e}async canActivate(e){const t=e.switchToHttp().getRequest().params.email;return(await this.users.getPermissions(t)).isAdmin}};AdminGuard=__decorate([common_1.Injectable(),__metadata("design:paramtypes",[users_service_1.UsersService])],AdminGuard),exports.AdminGuard=AdminGuard;