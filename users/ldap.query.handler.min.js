"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LdapQueryHandler=void 0;const common_1=require("@nestjs/common");class LdapQueryHandler{constructor(){this.log=new common_1.Logger(LdapQueryHandler.name)}parseQuery(e){this.log.debug(`query: ${e}`);const r=e.match(LdapQueryHandler.PARSER);if(r&&2==r.length&&r[1])return r[1];throw new Error(LdapQueryHandler.LDAP_ERROR_RESPONSE)}}exports.LdapQueryHandler=LdapQueryHandler,LdapQueryHandler.LDAP_SEARCH_QUERY=e=>`(&(objectClass=person)(objectClass=user)(email=${e}))`,LdapQueryHandler.LDAP_ERROR_RESPONSE="\n      Lookup failed: javax.naming.NamingException: \n      [LDAP: error code 1 - 000004DC: Lda pErr: DSID-0C0906DC, comment: context not found., data 0, v1db1 ]; \n      remaining name: 'OU=Users,O=BrokenCrystals'\n    ",LdapQueryHandler.PARSER=/\(&\(objectClass=person\)\(objectClass=user\)\(email=(.*)\)\)/;