"use strict";var ProductsController_1,__decorate=this&&this.__decorate||function(e,t,r,o){var s,c=arguments.length,a=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(a=(c<3?s(a):c>3?s(t,r,a):s(t,r))||a);return c>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProductsController=void 0;const common_1=require("@nestjs/common"),swagger_1=require("@nestjs/swagger"),auth_guard_1=require("../auth/auth.guard"),auth_service_1=require("../auth/auth.service"),jwt_type_decorator_1=require("../auth/jwt/jwt.type.decorator"),ProductDto_1=require("./api/ProductDto"),products_service_1=require("./products.service"),products_controller_swagger_desc_1=require("./products.controller.swagger.desc");let ProductsController=ProductsController_1=class{constructor(e){this.productsService=e,this.logger=new common_1.Logger(ProductsController_1.name)}async getProducts(){this.logger.debug("Get all products.");return(await this.productsService.findAll()).map((e=>new ProductDto_1.ProductDto(e)))}async getLatestProducts(){this.logger.debug("Get latest products.");return(await this.productsService.findLatest(3)).map((e=>new ProductDto_1.ProductDto(e)))}};__decorate([common_1.Get(),common_1.UseGuards(auth_guard_1.AuthGuard),jwt_type_decorator_1.JwtType(auth_service_1.JwtProcessorType.RSA),swagger_1.ApiOperation({description:products_controller_swagger_desc_1.SWAGGER_DESC_GET_PRODUCTS}),swagger_1.ApiOkResponse({type:ProductDto_1.ProductDto,isArray:!0}),swagger_1.ApiForbiddenResponse({schema:{type:"object",properties:{statusCode:{type:"number"},message:{type:"string"},error:{type:"string"}}}}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ProductsController.prototype,"getProducts",null),__decorate([common_1.Get("latest"),swagger_1.ApiOperation({description:products_controller_swagger_desc_1.SWAGGER_DESC_GET_LATEST_PRODUCTS}),swagger_1.ApiOkResponse({type:ProductDto_1.ProductDto,isArray:!0}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ProductsController.prototype,"getLatestProducts",null),ProductsController=ProductsController_1=__decorate([common_1.Controller("/api/products"),swagger_1.ApiTags("Products controller"),__metadata("design:paramtypes",[products_service_1.ProductsService])],ProductsController),exports.ProductsController=ProductsController;